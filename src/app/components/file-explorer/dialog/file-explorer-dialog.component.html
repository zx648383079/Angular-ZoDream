@if (visible && mode > 0) {
    <div class="dialog-mask"></div>
}
@if (visible) {
<div [ngClass]="{'file-explorer-window': mode < 1, 'file-explorer-dailog': mode > 0}">
    <div class="explorer-header">
        <div class="action-item" (click)="tapBack()" [ngClass]="{disabled: !canBack}">
            <i class="iconfont icon-arrow-left"></i>
        </div>
        <div class="action-item" (click)="tapForward()" [ngClass]="{disabled: !canForward}">
            <i class="iconfont icon-arrow-right"></i>
        </div>
        <div class="action-item" (click)="tapUp()" [ngClass]="{disabled: !canUp}">
            <i class="iconfont icon-arrow-up"></i>
        </div>
        <div class="action-item" (click)="tapRefresh()">
            <i class="iconfont icon-refresh"></i>
        </div>
        <form class="breadcrumb-bar" (ngSubmit)="tapConfirmPath()" (click)="pathIsInputing = true">
            @if (pathIsInputing) {
                <input type="text" name="path" [(ngModel)]="path">
            } @else {
                @for (item of breadcrumbItems; track $index) {
                    <a class="breadcrumb-item" [ngClass]="{disabled: item.disabled}" (click)="tapBreadcrumb(item, $event)">
                        @if (item.icon) {
                            <i class="iconfont" [ngClass]="item.icon"></i>
                        }
                        <span class="breadcrumb-item-name">{{ item.name }}</span>
                    </a>
                }
            }
        </form>
        <form class="search-bar" (ngSubmit)="tapConfirmSearch()">
            <input type="text" name="keywords" [(ngModel)]="keywords" placeholder="Search">
            <i class="iconfont icon-search" (click)="tapConfirmSearch()"></i>
        </form>
        @if (mode > 0) {
        <div class="action-item" (click)="visible = false">
            <i class="iconfont icon-close"></i>
        </div>
        }
       
    </div>
    <div class="explorer-body">
        <app-file-explorer-catalog (pathChange)="onCatalogTap($event)"></app-file-explorer-catalog>
        <app-file-explorer-panel (pathChange)="onFileTap($event)" (selectedChange)="onSelectedChange($event)"></app-file-explorer-panel>
    </div>
    <div class="dialog-footer">

    </div>
</div>
}


<ng-container #modalVC></ng-container>
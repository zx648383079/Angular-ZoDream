
<div class="cart-page">
    <div class="container">
        <ng-container *ngIf="items.length < 1; else elseTemplate">
            <div class="empty-cart-box">
                <ng-container *ngIf="guest; else elseGuestTemplate">
                    <p>After login, you can synchronize the products in the shopping cart</p>
                    <a class="btn btn-primary" routerLink="../auth">Sign up now</a>
                </ng-container>
                <ng-template #elseGuestTemplate>
                    <p>Your cart is empty</p>
                <a class="btn btn-primary" routerLink="../">Go Shopping</a>
                </ng-template>
            </div>
        </ng-container>
        <ng-template #elseTemplate>
            <div class="cart-header">
                <div class="chkbox" (click)="toggleCheckAll()">
                    <i class="iconfont" [ngClass]="{'icon-check-square-o': checkedAll, 'icon-square-o': !checkedAll}"></i>
                    <span>全选</span>
                </div>
                <div>商品信息</div>
                <div>单价</div>
                <div>数量</div>
                <div>小计</div>
                <div>操作</div>
            </div>
            
            <div class="cart-group-item" *ngFor="let group of items">
                <div class="group-header">
                    <div class="chk" (click)="toggleCheckGroup(group)">
                        <i class="iconfont" [ngClass]="{'icon-check-square-o': group.checked, 'icon-square-o': !group.checked}"></i>
                    </div>
                    <div class="name">
                        {{ group.name }}
                    </div>
                </div>
                <div class="cart-item" *ngFor="let item of group.goods_list">
                    <div class="chk" (click)="toggleCheck(group, item)">
                        <i class="iconfont" [ngClass]="{'icon-check-square-o': item.is_checked, 'icon-square-o': !item.is_checked}"></i>
                    </div>
                    <div class="thumb">
                        <img [src]="item.goods.thumb" alt="">
                    </div>
                    <div>
                        <div class="name">{{ item.goods.name }}</div>
                        <div class="attr">白色</div>
                    </div>
                    <div class="price">
                        <span>{{ item.price }}</span>
                    </div>
                    <div>
                        <div class="number-box">
                            <i class="iconfont icon-minus"></i>
                            <input type="text" class="number-input" [(ngModel)]="item.amount">
                            <i class="iconfont icon-plus"></i>
                        </div>
                    </div>
                    <div class="total">
                        <span>{{ item.price * item.amount }}</span>
                    </div>
                    <div class="actions">
                        <a href="">移入收藏夹</a>
                        <a href="">删除</a>
                    </div>
                </div>
            </div>
            
            <div class="cart-footer">
                <div class="chkbox">
                    <i class="iconfont" [ngClass]="{'icon-check-square-o': checkedAll, 'icon-square-o': !checkedAll}" (click)="toggleCheckAll()"></i>
                    <span>
                        <span>已选（</span><span class="cart-checked-count">0</span>
                        <span>）</span>
                    </span>
                    <a>批量删除</a>
                    <a>清空失效商品</a>
                </div>
                <div class="total">
                    <span>SUBTOTAL : </span>
                    <span class="price">￥{{ total }}</span>
                    <span>活动优惠 : </span>
                    <span class="price">￥0</span>
                </div>
                <div class="money">
                    <span>应付总额：</span>
                    <span class="price">¥ {{ total }}</span>
                    <div class="tip" *ngIf="cart.promotion_cell.length > 0">{{ cart.promotion_cell[0].popup_tip }}></div>
                </div>
                <div class="checkout">
                    <a class="btn">CHECKOUT</a>
                </div>
            </div>
        </ng-template>
        

        <div class="panel" appLazyLoad (lazyLoading)="loadLike()">
            <div class="panel-header">
            You like
            </div>
            <div class="panel-body" *ngIf="likeItems.length > 0">
                <div class="slider slider-goods">
                    <div class="slider-previous">&lt;</div>
                    <div class="slider-box">
                        <ul>
                            <li class="goods-item" *ngFor="let item of likeItems">
                                <div class="thumb">
                                    <a [routerLink]="'../' + item.id">
                                        <img [src]="item.thumb" alt="">
                                    </a>
                                </div>
                                <div class="name">{{ item.name }}</div>
                                <div class="price">{{ item.price }}</div>
                            </li>
                        </ul>
                    </div>
                    <div class="slider-next">&gt;</div>
                </div>
            </div>
        </div>

    </div>
</div>
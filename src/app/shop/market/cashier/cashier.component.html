
<div class="cashier-page">
    <div class="container">
        <div class="panel">
            <div class="panel-header">
            收货信息
            </div>
            <div class="panel-body">
                <ng-container *ngIf="addressIsEdit; else elseTemplate">
                    <div class="address-edit">
                        <div class="edit-body">
                            <div>*所在地区:</div>
                            <div class="region-input">
                                <select name="" id=""></select>
                                <select name="" id=""></select>
                                <select name="" id=""></select>
                            </div>
                            <div>*详细地址:</div>
                            <div>
                                <textarea [(ngModel)]="editData.address" cols="30" rows="10"></textarea>
                            </div>
                            <div>*收货人:</div>
                            <div>
                                <input type="text" [(ngModel)]="editData.name">
                            </div>
                            <div>*手机号码:</div>
                            <div>
                                <input type="text" [(ngModel)]="editData.tel">
                            </div>
                        </div>
                        <div class="edit-right">
                            <div (click)="editData.is_default = !editData.is_default">
                                <div class="checkbox">
                                    <i class="iconfont" [ngClass]="{'icon-check-square-o': editData.is_default, 'icon-square-o': !editData.is_default}"></i>
                                </div>
                                设为默认
                            </div>
                            <button type="button" class="btn">保存地址</button>
                            <button type="button" class="btn btn-cancel" *ngIf="editData.id > 0">取消</button>
                        </div>
                    </div>
                </ng-container>
                <ng-template #elseTemplate>
                    <div class="address-view">
                        <div>
                            <div>
                                <i class="fa fa-map-marker"></i>
                                <ng-container *ngIf="address.is_default">
                                    默认地址
                                </ng-container>
                                
                                <a class="btn" (click)="tapEditAddress(address)">修改</a>
                            </div>
                            <div>
                                <span>收 货 人: </span>
                                {{ address.name }}</div>
                            <div>
                                <span>联系方式 : </span>    
                                {{ address.tel }}</div>
                            <div>
                                <span>收货地址 : </span>    
                                {{ address.region_name }} {{ address.address }}</div>
                        </div>
                        <div class="right">
                            <p><a (click)="tapChooseAddress()">地址切换</a></p>
                            <p><a (click)="tapEditAddress()">新建地址</a></p>
                        </div>
                    </div>
                </ng-template>
                
            </div>
        </div>

        <div class="panel">
            <div class="panel-header order-goods-header">
               <div>商品信息</div> 
               <div>单价</div>
               <div>数量</div>
               <div>小计</div>
               <div>实付</div>
            </div>
            <div class="panel-body">
                <ng-container *ngFor="let group of items">
                    <div class="group-header">
                        <div class="name">
                            {{ group.name }}
                        </div>
                    </div>
                    <div class="order-goods-item" *ngFor="let item of group.goods_list">
                        <div class="goods-info">
                            <div class="thumb">
                                <img [src]="item.goods.thumb" alt="">
                            </div>
                            <div>
                                <div class="name">{{ item.goods.name }}</div>
                                <div class="attr"></div>
                            </div>
                        </div> 
                        <div>{{ item.price }}</div>
                        <div>{{ item.amount }}</div>
                        <div>{{ item.price * item.amount }}</div>
                        <div>{{ item.price * item.amount }}</div>
                    </div>
                </ng-container>
                
            </div>
            <div class="panel-footer">
                <div class="shipping-box">
                    <h4>配送方式：</h4>
                    <ng-container *ngFor="let item of shippingItems">
                        <span class="radio-label">
                            {{ item.name }}
                        </span>
                    </ng-container>
                </div>
                <div class="payment-box">
                    <h4>支付方式：</h4>
                    <ng-container *ngFor="let item of paymentItems">
                        <span class="radio-label">
                            {{ item.name }}
                        </span>
                    </ng-container>
                </div>
                <div class="invoice-box">
                    <h4>发票信息：</h4>
                    <input type="checkbox" name="" id="">我要开发票
                </div>
                <div class="coupon-box">
                    <h4>使用优惠券(0张)</h4>
                    
                </div>
                
                <div class="card-box">
                    <h4>使用礼品卡</h4>
                    <input type="checkbox" name="" id="">可用余额
                </div>
                <div class="checkout-footer" *ngIf="order">
                    <div class="amount-box">
                        <div>商品合计:
                            <span class="price">{{ order.goods_amount }}</span>
                        </div>
                        <div>运费:
                            <span class="price">{{ order.shipping_fee }}</span>
                        </div>
                        <div>应付总额:
                            <span class="price">{{ order.order_amount }}</span>
                        </div>
                    </div>
                    <a class="btn">去付款</a>
                    <ng-container *ngIf="order.address">
                        <div>{{ order.address.name }} {{ order.address.tel }}</div>
                        <div>{{ order.address.region_name }} {{ order.address.address }}</div>
                    </ng-container>
                </div>
        </div>
    </div>
</div>

<div id="address-dialog" class="dialog dialog-box" data-type="dialog">
    <div class="dialog-header">
        <div class="dialog-title">选择地址</div>
        <i class="fa fa-close dialog-close"></i>
    </div>
    <div class="dialog-body">
        
    </div>
    <div class="dialog-footer">
        <button type="button" class="dialog-yes">确定</button><button type="button" class="dialog-close">取消</button>
    </div>
</div>

<div class="dialog dialog-box" data-type="dialog">
    <div class="dialog-header">
        <div class="dialog-title">发票信息</div>
        <i class="fa fa-close dialog-close"></i>
    </div>
    <div class="dialog-body">
        
    </div>
    <div class="dialog-footer">
        <button type="button" class="dialog-yes">确定</button><button type="button" class="dialog-close">取消</button>
    </div>
</div>
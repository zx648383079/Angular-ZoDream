<app-edit-header [title]="data && data.id > 0 ? '编辑配送方式' : '新增配送方式'" (submited)="tapSubmit()" [disabled]="form.invalid"></app-edit-header>
<div class="container-fluid">
    <form class="form-table" [formGroup]="form" (ngSubmit)="tapSubmit()">
        <app-panel title="基本信息">
            <div class="input-group">
                <label for="name">名称</label>
                <div class="">
                    <input type="text" id="name" class="form-control " formControlName="name">
    
                </div>
            </div>
            <div class="input-group">
                <label for="icon">图标</label>
                <div class="file-input">
                    <input type="text" id="icon" class="form-control" formControlName="icon">
                    <label for="fileUpload" class="btn btn-primary">上传</label>
                    <button type="button" class="btn btn-info">预览</button>
                    <input type="file" name="file" id="fileUpload" (change)="uploadFile($event)" accept="image/*"/>
                </div>
            </div>
            <div class="input-group">
                <label for="code">Code</label>
                <div class="">
                    <ng-select [items]="items" bindValue="value" bindLabel="name" formControlName="code"></ng-select>
    
                </div>
            </div>
            <div class="input-group">
                <label for="method">计费方式</label>
                <div class="">
                    <span class="radio-label">
                        <input type="radio" id="method0" formControlName="method" value="0">
                        <label for="method0">按件数</label>
                    </span><span class="radio-label">
                        <input type="radio" id="method1" formControlName="method" value="1">
                        <label for="method1">按重量</label>
                    </span>
                </div>
            </div>
            <div class="input-group">
                <label for="description">介绍</label>
                <div class="">
                    <textarea id="description" class="form-control " formControlName="description"></textarea>
    
                </div>
            </div>
            <div class="input-group">
                <label for="position">排序</label>
                <div class="">
                    <input type="text" id="position" class="form-control " formControlName="position">
    
                </div>
            </div> 
        </app-panel>
        
        <div class="panel-container">
            <div class="group-box">
                <p class="text-center">配送区域及运费</p>
                <table class="regional-table">
                    <tbody>
                        <tr>
                            <th width="42%">可配送区域</th>
                            <th>
                                <span class="first">首件 (个)</span>
                            </th>
                            <th>运费 (元)</th>
                            <th>
                                <span class="additional">续件 (个)</span>
                            </th>
                            <th>续费 (元)</th>
                            <th>免费标准</th>
                        </tr>
                        <tr>
                            <td class="am-text-left">
                                <p class="selected-content am-margin-bottom-xs"> 北京市 </p>
                                <p class="operation am-margin-bottom-xs"> <a class="edit" href="javascript:;">编辑</a> <a
                                        class="delete" href="javascript:;">删除</a> </p> <input type="hidden"
                                    name="shipping[region][]" value="32"> <input type="hidden" name="shipping[id][]">
                            </td>
                            <td> <input type="number" name="shipping[first_step][]" class="form-control"></td>
                            <td> <input type="number" name="shipping[first_fee][]" class="form-control"></td>
                            <td> <input type="number" name="shipping[additional][]" class="form-control"></td>
                            <td> <input type="number" name="shipping[additional_fee][]" class="form-control"></td>
                            <td> <input type="number" name="shipping[free_step][]" class="form-control"></td>
                        </tr>
                        <tr>
                            <td colspan="6" class="am-text-left">
                                <a class="btn btn-info add-region" (click)="open(content)">
                                    <i class="iconfont icon-dingwei"></i>
                                    点击添加可配送区域和运费
                                </a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        
        <button type="submit" class="btn btn-success">确认保存</button>
        <a class="btn btn-danger" href="javascript:history.go(-1);">取消修改</a>
    </form>
</div>


<ng-template #content let-modal>
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">选择可配送区域</h4>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
        <div class="place-box">
            <div class="checkbtn">
                <label><input type="checkbox"> 全国</label>
                <a class="clearCheck">清空</a>
            </div>
            <div class="city-box row">
                <div class="col-sm-3 city-item" *ngFor="let item of regionItems">
                    <label>
                        <input type="checkbox">
                        <span class="city-name">{{ item.name }}</span>
                        <span class="selected-amount"></span>
                    </label>
                    <div class="sub-city-box" *ngIf="item.children && item.children.length > 0">
                        <div class="row">
                            <div class="city-item col-sm-6" *ngFor="let it of item.children">
                                <label>
                                    <input type="checkbox">
                                    <span class="city-name">{{ it.name }}</span>
                                    <span class="selected-amount"></span>
                                </label>
                                <div class="sub-city-box" *ngIf="it.children && it.children.length > 0">
                                    <div class="row">
                                        <div class="city-item col-sm-6" *ngFor="let i of it.children">
                                            <label>
                                                <input type="checkbox">
                                                <span class="city-name">{{ i.name }}</span>
                                                <span class="selected-amount"></span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save click')">确定</button>
    </div>
</ng-template>
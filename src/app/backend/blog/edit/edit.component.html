<app-edit-header [title]="data && data.id > 0 ? '编辑文章' : '新增文章'" (submited)="tapSubmit()" [disabled]="form.invalid"></app-edit-header>

<div class="container-fluid">
    <form class="form-table" [formGroup]="form" (ngSubmit)="tapSubmit()">
        <div class="panel-container">
            <div class="title-input">
                <label for="title">标题</label>
                <input type="text" id="title" class="form-control" formControlName="title">
            </div>
            
            <app-markdown-editor formControlName="content" (imageUpload)="editorImageUpload($event)"></app-markdown-editor>
        </div>

        <div class="row">
            <div class="col-md-6">
                <app-panel title="高级属性">
                    <div class="input-group">
                        <label for="term_id">分类</label>
                        <div class="">
                            <select id="term_id" class="form-control" formControlName="term_id">
                                <ng-container *ngFor="let item of categories">
                                    <option [value]="item.id">{{ item.name }}</option>
                                </ng-container>
                            </select>
        
                        </div>
                    </div>
                    <div class="input-group">
                        <label for="programming_language">编程语言</label>
                        <div class="">
                            <select id="programming_language" class="form-control" formControlName="programming_language">
                                <option value="">请选择</option>
                                <option value="Html">Html</option>
                                <option value="Css">Css</option>
                                <option value="Sass">Sass</option>
                                <option value="Less">Less</option>
                                <option value="TypeScript">TypeScript</option>
                                <option value="JavaScript">JavaScript</option>
                                <option value="PHP">PHP</option>
                                <option value="Go">Go</option>
                                <option value="C#">C#</option>
                                <option value="ASP.NET">ASP.NET</option>
                                <option value=".NET Core">.NET Core</option>
                                <option value="Python">Python</option>
                                <option value="C">C</option>
                                <option value="C++">C++</option>
                                <option value="Java">Java</option>
                                <option value="Kotlin">Kotlin</option>
                                <option value="Swift">Swift</option>
                                <option value="Objective-C">Objective-C</option>
                                <option value="Dart">Dart</option>
                                <option value="Flutter">Flutter</option>
                            </select>
        
                        </div>
                    </div>
                    <div class="input-group">
                        <label for="type">类型</label>
                        <div class="">
                            <select id="type" class="form-control" formControlName="type">
                                <option value="0" >原创</option>
                                <option value="1">转载</option>
                            </select>
        
                        </div>
                    </div>
                   
                    <div class="input-group">
                        <label for="thumb">图片</label>
                        <div class="file-input">
                            <input type="text" id="thumb" class="form-control" formControlName="thumb">
                            <label for="fileUpload" class="btn btn-primary">上传</label>
                            <button type="button" class="btn btn-info" (click)="tapPreview()">预览</button>
                            <input type="file" name="file" id="fileUpload" (change)="uploadFile($event)" accept="image/*"/>
                        </div>
                    </div>
                    <div class="input-group">
                        <label for="open_type">公开类型</label>
                        <div class="">
                            <select id="open_type" class="form-control" formControlName="open_type">
                                <option value="0" >公开</option>
                                <option value="1">仅登录</option>
                                <option value="5">密码</option>
                                <option value="6">购买</option>
                                <option value="2">草稿</option>
                            </select>
        
                        </div>
                    </div>
                    <div class="input-group" style="display: none;">
                        <label for="open_rule">公开规则</label>
                        <div class="">
                            <input type="text" id="open_rule" class="form-control" formControlName="open_rule">
        
                        </div>
                    </div>
                    <div class="input-group">
                        <label for="edit_type">编辑器</label>
                        <div class="">
                            <select id="edit_type" class="form-control" formControlName="edit_type">
                                <option value="0" >Ueditor</option>
                                <option value="1">MarkDown</option>
                            </select>
        
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label for="keywords">关键字</label>
                        <div class="">
                            <input type="text" id="keywords" class="form-control" formControlName="keywords">
        
                        </div>
                    </div>
                    <div class="input-group">
                        <label for="description">说明</label>
                        <div class="">
                            <textarea id="description" class="form-control" formControlName="description"></textarea>
        
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label>标签</label>
                        <div>
                            <ng-select [multiple]="true" [items]="tagItems" bindValue="id" bindLabel="name" formControlName="tags" placeholder="选择标签"></ng-select>
                        </div>
                    </div>
                </app-panel>
            </div>
            <div class="col-md-6">
                <app-panel title="附加属性">
                    <div class="input-group">
                        <label for="meta_source_author">原文作者</label>
                        <div class="">
                            <input type="text" id="meta_source_author" class="form-control" formControlName="source_author">
                    
                        </div>
                    </div>
                    <div class="input-group">
                        <label for="source_url">原文链接</label>
                        <div class="">
                            <input type="text" id="source_url" class="form-control" formControlName="source_url">
                        </div>
                    </div>
                    <div class="input-group">
                        <label for="meta_is_hide">是否隐藏</label>
                        <div>
                            <app-switch id="meta_is_hide" formControlName="is_hide"></app-switch>
                        </div>
                    </div>
                    <div class="input-group">
                        <label for="weather">天气</label>
                        <div class="">
                            <select id="weather" class="form-control" formControlName="weather">
                                <option value="">请选择</option>
                                <option value="cloudy">多云</option>
                                <option value="sunny">晴</option>
                                <option value="overcast">阴</option>
                                <option value="drizzle">毛毛雨</option>
                                <option value="shower">阵雨</option>
                                <option value="thunder storm">雷雨</option>
                                <option value="thunder shower">雷阵雨</option>
                                <option value="light rain">小雨</option>
                                <option value="moderate">中雨</option>
                                <option value="heavy rain">大雨</option>
                                <option value="snow shower">阵雨</option>
                                <option value="sleet">雨夹雪</option>
                                <option value="hail">冰雹</option>
                                <option value="blizzard">大风雪</option>
                                <option value="snowstorm">暴风雪</option>
                                <option value="light snow">小雪</option>
                                <option value="moderate snow">中雪</option>
                                <option value="heavy snow">大雪</option>
                                <option value="windy">有风</option>
                                <option value="breeze">微风</option>
                                <option value="gale">大风</option>
                                <option value="typhoon">台风</option>
                                <option value="hurricane">飓风</option>
                                <option value="haze">霾</option>
                                <option value="foggy">雾</option>
                                <option value="frosty">霜冻</option>
                                <option value="lightning">闪电</option>
                                <option value="sandstorm">沙尘暴</option>
                            </select>
        
                        </div>
                    </div>
                    <div class="input-group">
                        <label for="audio_url">音频</label>
                        <div class="file-input">
                            <input type="text" id="audio_url" class="form-control" formControlName="audio_url">
                            <label for="audioUpload" class="btn btn-primary">上传</label>
                            <input type="file" name="file" id="audioUpload" (change)="uploadAudio($event)" accept="audio/*"/>
                        </div>
                    </div>
                    <div class="input-group">
                        <label for="video_url">视频</label>
                        <div class="file-input">
                            <input type="text" id="video_url" class="form-control" formControlName="video_url">
                            <label for="videoUpload" class="btn btn-primary">上传</label>
                            <input type="file" name="file" id="videoUpload" (change)="uploadVideo($event)" accept="video/*"/>
                        </div>
                    </div>
                    <div class="input-group">
                        <label for="meta_cc_license">版权协议</label>
                        <div class="">
                            <select id="meta_cc_license" class="form-control" formControlName="cc_license">
                                <option value="">请选择</option>
                                <option value="CC BY">署名BY</option>
                                <option value="CC BY-SA">署名相同方法同享BY-SA</option>
                                <option value="CC BY-NC">署名非商业性运用BY-NC</option>
                                <option value="CC BY-NC-SA">署名非商业性运用相同方法同享BY-NC-SA</option>
                                <option value="CC BY-ND">署名制止演绎BY-ND</option>
                                <option value="CC BY-NC-ND">署名非商业性运用制止演绎BY-NC-ND</option>
                                <option value="CC0">放弃版权无任何条件0</option>
                            </select>
                        </div>
                    </div>
                    <div class="input-group">
                        <label for="comment_status">评论状态</label>
                        <div>
                            <app-switch id="comment_status" formControlName="comment_status"></app-switch>
                        </div>
                    </div>
                </app-panel>
            </div>
        </div>

        <button type="submit" class="btn btn-success">确认保存</button>
        <a class="btn btn-danger" href="javascript:history.go(-1);">取消修改</a>
    </form>
</div>
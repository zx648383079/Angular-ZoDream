<div class="router-bar">
    <div class="tool-item" (click)="tapBack()">
        <i class="iconfont icon-arrow-left"></i>
    </div>
</div>
<div class="container-fluid">
    <div class="tag-bar">
        <div class="tag-item">全部</div>
        <div class="tag-item" (click)="toggleFilter()">更多</div>
    </div>

    @if (filterVisible()) {
    <div class="filter-container">
        @for (item of filterItems(); track $index) {
        <div class="filter-group">
              <div class="group-header">
                  {{ item.label }}
              </div>
              <div class="group-body">
                  @for (it of item.items; track $index) {
                      <a [class]="{active: it.selected}" (click)="tapFilter(item.name, it.value)">{{ it.label }}</a>
                  }
              </div>
        </div>
        }
        <div class="filter-group">
          <div class="group-header">
              排序
          </div>
          <div class="group-body">
                @for (item of sortItems; track $index) {
                    <a [class]="{active: item.value == sortKey()}" (click)="tapSort(item)">{{ item.name }}
                        @if (item.value && sortKey() == item.value) {
                        <i class="iconfont" [class]="{'icon-sort-alpha-asc': orderAsc(), 'icon-sort-alpha-desc': !orderAsc()}"></i>
                        }
                    </a>
                }
          </div>
        </div>
    </div>
    }


    @if (queries.keywords) {
    <div class="search-body">
        @for (item of items(); track $index) {
            <a class="music-list-item" [routerLink]="['list', item.id]">
                <div class="item-cover">
                    <img [src]="item.cover | asset" [alt]="item.title">
                    <div class="item-icon">
                        <i class="iconfont icon-play"></i>
                    </div>
                </div>
                <div class="item-body">
                    <div class="item-name">{{ item.title }}</div>
                </div>
            </a>
        }

        <div class="row">
            <div class="col-md-12">
                <app-loading-tip [loading]="isLoading()" [visible]="isLoading() || items().length == 0" />
                <app-pagination [total]="total()" [field]="queries.page" (valueChange)="goPage($event)" [perPage]="queries.per_page().value()" />
            </div>
        </div>
    </div>
    }
</div>
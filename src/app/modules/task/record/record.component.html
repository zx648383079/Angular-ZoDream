<div class="container-fluid">
    <app-page-tip>
        <ul>
            <li>这是任务执行记录列表</li>
        </ul>
    </app-page-tip>

    <div class="panel-container">
        <div class="page-search-bar">
            <form class="form-horizontal-control" (ngSubmit)="tapSearch(searchForm.value)" #searchForm="ngForm">
                <div class="input-group-control">
                    <label for="date">日期</label>
                    <app-date-input id="date" name="date" placeholder="选择日期" [ngModel]="date" />
                </div>
                <div class="input-group-control">
                    <label>区间</label>
                    <select name="type" [ngModel]="type" class="form-control">
                        @for (item of typeItems; track $index;let i = $index) {
                            <option [value]="i" >{{ item }}</option>
                        }
                    </select>
                </div>
                <button type="submit" class="btn btn-primary">搜索</button>
            </form>
        </div>
    </div>

    <div class="review-box">
        @if (type < 1) {
            <div class="time-box">
                <div class="time-header">
                    @for (item of dayItems; track $index) {
                        <section>{{ item.label }}</section>
                    }
                </div>
                <div class="time-body">
                    @for (item of dayItems; track $index) {
                        @for (it of item.items; track $index) {
                            <div class="task-item" [ngStyle]="it.style" [title]="it.task.name">
                                {{ it.task.name }}
                            </div>
                        }
                    }
                </div>
            </div>
        } @else if (type == 1) {
            <div class="week-box">
                <div class="week-header">
                    @for (item of weekItems; track $index) {
                        <section>{{ item.label }}</section>
                    }
                    
                </div>
                <div class="week-body">
                    @for (item of weekItems; track $index) {
                        @for (it of item.items; track $index) {
                            <div class="task-item" [ngStyle]="it.style" [title]="it.task.name">
                                {{ it.task.name }}
                            </div>
                        }
                    }
                </div>
            </div>
        } @else if (type == 2) {
            <div class="month-box">
                <div class="month-header">
                    <section>周一</section>
                    <section>周二</section>
                    <section>周三</section>
                    <section>周四</section>
                    <section>周五</section>
                    <section>周六</section>
                    <section>周日</section>
                </div>
                <div class="month-body">
                    @for (item of monthItems; track $index) {
                    <div class="day-item">
                        <span class="day-label">{{ item.label }}</span>
                        <ul class="day-box">
                            @for (it of item.items; track $index) {
                            <li>
                                {{ it.task.name }}
                            </li>
                            }
                        </ul>
                    </div>
                    }
                </div>
            </div>
        }
    </div>
</div>
<div class="tablet-large-header tablet-visible">
    <div class="route-bar">
        <a class="route-icon" (click)="tapBack()">
            <i class="iconfont icon-chevron-left"></i>
        </a>
        <span class="route-title" i18n>
            Password
        </span>
    </div>
</div>
@if (tabIndex < 1) {
<div class="container">
    <div class="input-item" (click)="tabIndex = 1">
        <div class="item-icon">
            <i class="iconfont icon-key"></i>
        </div>
        <div class="item-body">
            <div class="item-name" i18n>Authentication by original password</div>
            <div class="item-meta" i18n>If you remember your password, you can change it with the current password</div>
        </div>
        <div class="item-action">
            <i class="iconfont icon-chevron-right"></i>
        </div>
    </div>
    <div class="input-item" (click)="tabIndex = 2">
        <div class="item-icon">
            <i class="iconfont icon-mail"></i>
        </div>
        <div class="item-body">
            <div class="item-name" i18n>Verification by email</div>
            <div class="item-meta" i18n>If your account is bound to a mailbox, you can modify it by sending a verification code to the bound mailbox</div>
        </div>
        <div class="item-action">
            <i class="iconfont icon-chevron-right"></i>
        </div>
    </div>
    <div class="input-item" (click)="tabIndex = 3">
        <div class="item-icon">
            <i class="iconfont icon-mobile"></i>
        </div>
        <div class="item-body">
            <div class="item-name" i18n>Verification by cell phone</div>
            <div class="item-meta" i18n>If your bound cell phone is available, you can send a verification code to modify it via the bound cell phone</div>
        </div>
        <div class="item-action">
            <i class="iconfont icon-chevron-right"></i>
        </div>
    </div>
    <div class="input-item">
        <div class="item-icon">
            <i class="iconfont icon-service"></i>
        </div>
        <div class="item-body">
            <div class="item-name" i18n>None of the above methods can be used</div>
            <div class="item-meta" i18n>If your original cell phone number, email is no longer available, please contact us</div>
        </div>
    </div>
</div>
} @else if (tabIndex == 1) {
<div class="inner-container min-container">
    <div class="inline-input">
        <input type="password" class="form-control" i18n-placeholder placeholder="Old password">
    </div>
    <div class="inline-input">
        <input type="password" class="form-control" i18n-placeholder placeholder="New password">
    </div>
    <div class="inline-input">
        <input type="password" class="form-control" i18n-placeholder placeholder="Confirm new password">
    </div>
    <div class="btn-group">
        <button class="btn btn-primary" i18n>Confirm Update</button>
        <a class="btn btn-secondary" (click)="tabIndex = 0" i18n>Back</a>
    </div>
</div>
} @else {
<div class="container min-container">
    <div class="step-header">
        <a class="step-item" [ngClass]="{active: stepIndex < 1}">
            <span class="step-badge">1</span>
            <span class="step-title" i18n>Verify Account</span>
            <i class="step-line"></i>
        </a>
        <a class="step-item" [ngClass]="{active: stepIndex == 1}">
            <span class="step-badge">2</span>
            <span class="step-title" i18n>Set Password</span>
            <i class="step-line"></i>
        </a>
        <a class="step-item" [ngClass]="{active: stepIndex > 1}">
            <span class="step-badge">3</span>
            <span class="step-title" i18n>Finish</span>
        </a>
    </div>
    
    @if (stepIndex < 1) {
    <div class="step-body min-body">
        <div class="inline-input disabled">
            <label i18n>{tabIndex == 2, plural, =true {Email} =false {Phone}}</label>
            <input type="text" [value]="tabIndex == 2 ? user.email : user.mobile" readonly>
        </div>
        <div class="code-input">
            <input type="text" [(ngModel)]="data.verify_code">
            <app-countdown-button class="send-btn" (tapped)="tapSendCode($event)"></app-countdown-button>
        </div>
    
        <div class="btn btn-primary line-btn" (click)="tapNext()" i18n>Next</div>
    </div>
    } @else if (stepIndex == 1) {
    <div class="step-body min-body">
        <div class="inline-input">
            <input type="password" class="form-control" i18n-placeholder placeholder="New password">
        </div>
        <div class="inline-input">
            <input type="password" class="form-control" i18n-placeholder placeholder="Confirm new password">
        </div>
    
        <div class="btn btn-primary line-btn" (click)="tapNext()" i18n>Next</div>
    </div>
    } @else {
    <div class="step-body min-body">
        <div class="step-tip">
            <i class="iconfont icon-check"></i>
            <ng-container i18n>Update Successfully</ng-container>
        </div>
    </div>
    }
</div>
}

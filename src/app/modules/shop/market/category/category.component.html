@if (category()) {
<div class="category-page">
  <div class="container">
        <nav class="breadcrumb">
            <a class="breadcrumb-item" routerLink="../">Home</a>
            <span class="breadcrumb-item active">{{ category().name }}</span>
        </nav>

      @if (category().banner) {
      <div class="banner">
          <img [src]="category().banner" alt="">
      </div>
      }

      <div class="goods-area">
          <div class="filter-container">
              @for (item of filterItems(); track $index) {
              <div class="filter-group">
                    <div class="group-header">
                        {{ item.label }}
                    </div>
                    <div class="group-body">
                        @for (it of item.items; track $index) {
                            <a [class.active]="it.selected" (click)="tapFilter(item.name, it.value)">{{ it.label }}</a>
                        }
                        @if (item.name == 'price') {
                            <div class="filter-range-group">
                                <input type="number" class="form-control" [formField]="priceForm.min">
                                -
                                <input type="number" class="form-control" [formField]="priceForm.max">
                            </div>
                        }
                    </div>
              </div>
              }
              <div class="filter-group">
                <div class="group-header">
                    排序
                </div>
                <div class="group-body">
                    @for (item of sortItems; track $index) {
                        <a [class]="{active: item.value == sortKey()}" (click)="tapSort(item)">{{ item.name }}
                            @if (item.value && sortKey() == item.value) {
                            <i class="iconfont" [class]="{'icon-sort-alpha-asc': orderAsc(), 'icon-sort-alpha-desc': !orderAsc()}"></i>
                            }
                        </a>
                    }
                </div>
              </div>
          </div>
          <div class="category-header">
              <div class="title">
                {{ category().name }}
              </div>
              <p class="desc">{{ category().description }}</p>
          </div>
          <div class="row">
                @for (item of items(); track $index) {
                    <div class="col-lg-3 col-md-4 col-6">
                    <a class="goods-item item-hover" [routerLink]="'../../goods/' + item.id">
                        <div class="thumb">
                            <img [appLazyLoad]="item.thumb" [alt]="item.name">
                        </div>
                        <div class="name">{{ item.name }}</div>
                        <div class="price">{{ item.price | price }}</div>
                        <div class="desc">
                          {{ item.brief }}
                        </div>
                    </a>
                </div>
                }
          </div>
          <app-loading-tip [loading]="isLoading()" [visible]="isLoading() || items().length == 0" />
          <app-pagination [total]="total()" [formField]="queries.page" [perPage]="queries.per_page().value()" (valueChange)="goPage($event)" />
      </div>
  </div>
</div>
}
@if (category) {
<div class="category-page">
  <div class="container">
        <nav class="breadcrumb">
            <a class="breadcrumb-item" routerLink="../">Home</a>
            <span class="breadcrumb-item active">{{ category.name }}</span>
        </nav>

      @if (category.banner) {
      <div class="banner">
          <img [src]="category.banner" alt="">
      </div>
      }

      <div class="goods-area">
          <div class="filter-box">
              @for (item of filterItems; track $index) {
              <div class="filter-line">
                    <div class="filter-header">
                        {{ item.label }}
                    </div>
                    <div class="filter-body">
                        @for (it of item.items; track $index) {
                            <a [ngClass]="{active: it.selected}" (click)="tapFilter(item.name, it.value)">{{ it.label }}</a>
                        }
                        @if (item.name == 'price') {
                            <div class="price-input">
                                <input type="number" class="form-control" [(ngModel)]="price.min">
                                -
                                <input type="number" class="form-control" [(ngModel)]="price.max">
                            </div>
                        }
                    </div>
              </div>
              }
              <div class="filter-line">
                <div class="filter-header">
                    排序
                </div>
                <div class="filter-body">
                    @for (item of sortItems; track $index) {
                        <a [ngClass]="{active: item.value == sortKey}" (click)="tapSort(item)">{{ item.name }}
                            @if (item.value && sortKey == item.value) {
                            <i class="iconfont" [ngClass]="{'icon-sort-alpha-asc': orderAsc, 'icon-sort-alpha-desc': !orderAsc}"></i>
                            }
                        </a>
                    }
                </div>
              </div>
          </div>
          <div class="category-header">
              <div class="title">
                {{ category.name }}
              </div>
              <p class="desc">{{ category.description }}</p>
          </div>
          <div class="row">
                @for (item of items; track $index) {
                    <div class="col-lg-3 col-md-4 col-6">
                    <a class="goods-item item-hover" [routerLink]="'../../goods/' + item.id">
                        <div class="thumb">
                            <img [appLazyLoad]="item.thumb" [alt]="item.name">
                        </div>
                        <div class="name">{{ item.name }}</div>
                        <div class="price">{{ item.price | price }}</div>
                        <div class="desc">
                          {{ item.brief }}
                        </div>
                    </a>
                </div>
                }
          </div>
          <app-loading-tip [loading]="isLoading" [visible]="isLoading || items.length == 0"></app-loading-tip>
          <app-pagination [total]="total" [(page)]="queries.page" [perPage]="queries.per_page" (pageChange)="tapPage()"></app-pagination>
      </div>
  </div>
</div>
}
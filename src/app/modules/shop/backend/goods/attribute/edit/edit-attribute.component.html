<app-edit-header [title]="dataModel().id > 0 ? '编辑属性' : '新增属性'" (submited)="tapSubmit($event)" [disabled]="dataForm().invalid()" />
<div class="container-fluid">
    <form class="form-table-control panel-container" (submit)="tapSubmit2($event)">
        <div class="input-group-control">
            <label for="name">名称</label>
            <div>
                <input type="text" id="name" class="form-control" [field]="dataForm.name">
                @if (dataForm.name().invalid()) {
                <div class="input-tip">请输入名称</div>
                }
            </div>
        </div>
        <div class="input-group-control">
            <label for="group_id">类型分组</label>
            <div>
                <select id="group_id" class="form-control" [field]="dataForm.group_id" (change)="onGroupChange()">
                    @for (item of groupItems; track $index) {
                        <option [value]="item.id">{{ item.name }}</option>
                    }
                </select>
            </div>
        </div>
        <div class="input-group-control">
            <label for="property_group">属性分组</label>
            <div>
                <select id="property_group" class="form-control" [field]="dataForm.property_group">
                    @for (item of propertyGroups; track $index) {
                        <option [value]="item">{{ item }}</option>
                    }
                </select>
                <div class="input-tip">
                    当前仅在“唯一属性”下生效
                </div>
            </div>
        </div>
        <div class="input-group-control">
            <label for="search_type">搜索类型</label>
            <div>
                <span class="radio-label">
                    <input type="radio" id="search_type0" [field]="dataForm.search_type" value="0">
                    <label for="search_type0">不需要检索</label>
                </span><span class="radio-label">
                    <input type="radio" id="search_type1" [field]="dataForm.search_type" value="1">
                    <label for="search_type1">关键字检索</label>
                </span><span class="radio-label">
                    <input type="radio" id="search_type2" [field]="dataForm.search_type" value="2">
                    <label for="search_type2">范围检索</label>
                </span>
            </div>
        </div>
        <div class="input-group-control">
            <label for="type">类型</label>
            <div>
                <span class="radio-label">
                    <input type="radio" id="type0" [field]="dataForm.type" value="0">
                    <label for="type0">唯一属性</label>
                </span><span class="radio-label">
                    <input type="radio" id="type1" [field]="dataForm.type" value="1">
                    <label for="type1">单选属性</label>
                </span><span class="radio-label">
                    <input type="radio" id="type2" [field]="dataForm.type" value="2">
                    <label for="type2">复选属性</label>
                </span>
                <div class="input-tip">
                    选择"单选/复选属性"时，可以对商品该属性设置多个值，复选属性还能对不同属性值指定不同的价格加价，用户购买商品时需要选定具体的属性值。选择"唯一属性"时，商品的该属性值只能设置一个值，用户只能查看该值。
                </div>
            </div>
        </div>
        <div class="input-group-control">
            <label for="input_type">输入类型</label>
            <div>
                <span class="radio-label">
                    <input type="radio" id="input_type0" [field]="dataForm.input_type" value="0">
                    <label for="input_type0">手工录入</label>
                </span><span class="radio-label">
                    <input type="radio" id="input_type1" [field]="dataForm.input_type" value="1">
                    <label for="input_type1">从下面的列表中选择（一行代表一个可选值）</label>
                </span>
            </div>
        </div>
        @if (isInput()) {
        <div class="input-group-control">
            <label for="default_value">默认值</label>
            <div>
                <textarea id="default_value" class="form-control" [field]="dataForm.default_value"></textarea>
            </div>
        </div>
        }
        <div class="input-group-control">
            <label for="position">排序</label>
            <div>
                <input type="number" id="position" class="form-control" [field]="dataForm.position">
            </div>
        </div>
        <div class="btn-group">
            <app-action-button class="btn btn-primary" (tapped)="tapSubmit($event)" [disabled]="dataForm().invalid()">确认保存</app-action-button>
            <a class="btn btn-danger" href="javascript:history.go(-1);">取消修改</a>
        </div>
    </form>
</div>

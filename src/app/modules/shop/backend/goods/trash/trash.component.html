<div class="container-fluid">
    <app-page-tip>
        <ul>
            <li>商品回收站列表</li>
        </ul>
    </app-page-tip>
  <div class="panel-container">
    <div class="page-search-bar">
        <form class="form-horizontal-control"  (submit)="tapSearch($event)">
            <div class="input-group-control">
                <label for="keywords">标题</label>
                <input type="text" class="form-control" id="keywords" [formField]="queries.keywords" id="keywords" placeholder="标题" >
            </div>
            <div class="input-group-control">
                <label>分类</label>
                <select [formField]="queries.category" class="form-control">
                    <option value="0">请选择</option>
                    @for (item of categories; track $index) {
                    <option [value]="item.id">{{ item.level | treeLevel }}{{ item.name }}</option>
                    }
                </select>
            </div>
            <div class="input-group-control">
                <label>品牌</label>
                <select [formField]="queries.brand" class="form-control">
                    <option value="0">请选择</option>
                    @for (item of brandItems; track $index) {
                    <option [value]="item.id">{{ item.name }}</option>
                    }
                </select>
            </div>
            <button type="submit" class="btn btn-primary">搜索</button>
            
            <div class="btn-group pull-right">
                <a class="btn btn-success" (click)="tapClear()">全部清空</a>
                <a class="btn btn-dark" (click)="tapRestore()">全部还原</a>
                <a class="btn btn-info" routerLink="../list">返回商品列表</a>
            </div>
        </form>
      
      </div>
      
      <table class="table table-hover">
        <thead>
        <tr>
            <th>ID</th>
            <th>商品名</th>
            <th class="auto-hide">分类</th>
            <th class="auto-hide">品牌</th>
            <th>价格</th>
            <th class="auto-hide">推荐</th>
            <th>库存</th>
            <th>操作</th>
        </tr>
        </thead>
        <tbody>
            @for (item of items(); track $index) {
                <tr>
                <td>{{ item.id }}</td>
                <td>
                    <div class="goods-info">
                        <div class="thumb">
                            <img [src]="item.thumb" alt="" width="60" height="60">
                        </div>
                        <a class="name" href="" target="_blank">
                        {{ item.name }}</a>
                    </div>
                </td>
                <td class="auto-hide">
                        @if (item.category) {
                            {{ item.category.name }}
                        } @else {
                            [未分类]
                        }
                    </td>
                    <td class="auto-hide">
                        @if (item.brand) {
                            {{ item.brand.name }}
                        } @else {
                           [无]
                        }
                    </td>
                <td>
                    {{ item.price }}
                </td>
                <td class="auto-hide">
                      <div class="toggle-box" [class]="{active: item.is_best}">精品<i class="fa"></i></div>
                      <div class="toggle-box" [class]="{active: item.is_hot}">热门<i class="fa"></i></div>
                      <div class="toggle-box" [class]="{active: item.is_new}">新品<i class="fa"></i></div>
                </td>
                <td>
                    {{ item.stock }}
                </td>
                <td>
                    <div class="btn-group  btn-group-xs">
                        <a class="btn btn-info btn-xs" (click)="tapRestore(item)">还原</a>
                        <a class="btn btn-danger" (click)="tapRemove(item)">删除</a>
                    </div>
                </td>
            </tr>
            }
        </tbody>
      </table>
      <app-loading-tip [loading]="isLoading()" [visible]="isLoading() || items().length == 0" />
      <app-pagination [total]="total()" [formField]="queries.page" [perPage]="queries.per_page().value()" (valueChange)="goPage($event)" />
  </div>
</div>
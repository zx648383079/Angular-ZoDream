<div class="container-fluid">
    <app-pull-to-refresh [loading]="isLoading" [more]="hasMore" (refreshChange)="tapRefresh()" (moreChange)="tapMore()">
        @for (item of items; track $index) {
            <div class="book-item" (click)="tapRead(item)" (contextmenu)="tapContextMenu($event, item)">
                <div class="cover">
                    <img [src]="item.book.cover">
                </div>
                <div class="info">
                    <div class="name">{{ item.book.name }}</div>
                    <div class="tag">{{ item.book.author?.name }}</div>
                    <div class="desc">{{ item.updated_at | ago }}· {{ item.chapter ? item.chapter.title : '未读' }}</div>
                </div>
            </div>
        }
        @if (!isLoading && total < 1) {
            <div class="page-empty-tip">The bookshelf is empty</div>
        }
        
    </app-pull-to-refresh>
</div>
<app-context-menu></app-context-menu>
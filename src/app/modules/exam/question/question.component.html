<div class="container">
    <ul class="breadcrumb">
        <li class="breadcrumb-item">
            <a routerLink="/" class="iconfont icon-home"></a>
        </li>
        <li class="breadcrumb-item">
            <a routerLink="../../" i18n>
                Home
            </a>
        </li>
        @if (course) {
        <li class="breadcrumb-item active">
            {{ course.name }}
        </li>
        }
    </ul>
</div>

@if (data) {
<div class="container">
    <div class="panel-container">
        <div class="question-item-box">
            <app-question-input [(value)]="data" [editable]="editable" />
        </div>
        <div class="tool-bar">
            <div class="btn-bar">
                <div class="btn-group">
                    @if (cardIndex > 0) {
                    <a class="btn btn-primary" (click)="tapPrevious()">上一题</a>
                    }
                    <a class="btn btn-danger" (click)="tapCheck()">验证</a>
                    @if (cardIndex < cardItems.length - 1) {
                    <a class="btn btn-primary" (click)="tapNext()">下一题</a>
                    }
                </div>
                <div class="btn-group pull-right">
                    <button class="btn btn-info" (click)="cardVisiable = !cardVisiable">{{ cardVisiable ? '隐藏' : '显示' }}答题卡</button>
                    <button class="btn btn-success" (click)="analysisVisiable = !analysisVisiable">{{ analysisVisiable ? '隐藏' : '显示' }}详解</button>
                </div>
            </div>
        </div>
    </div>
    
    @if (analysisVisiable) {
    <div class="panel analysis-panel">
        <div class="panel-header">
            题目解析
        </div>
        <div class="panel-body">
            <app-math-mark [content]="data.analysis || '暂无解析'" />
        </div>
    </div>
    }
    @if (cardVisiable) {
    <div class="panel sheet-panel">
        <div class="panel-header">
            答题卡
        </div>
        <div class="panel-body">
            <ul>
                @for (item of cardItems; track $index; let i = $index) {
                    <li [class]="{right: item.right > 0, wrong: item.right < 0, active: item.active}">
                        <a (click)="tapCard(i)">{{ item.order }}</a>
                    </li>
                }
            </ul>
        </div>
    </div>
    }
</div>
}

<div class="question-box" [ngClass]="{'item-right': value.right > 0, 'item-wrong': value.right < 0}">
    <div class="title">
        <span class="order">{{ value.order }}.</span>
        <app-math-mark [content]="value.title"></app-math-mark>
        @if (value.score) {
            ({{ value.score }}分)
        }
    </div>
    <div class="edit-btn" (click)="tapEdit(modal)">
        <i class="iconfont icon-edit"></i>
    </div>
    @if (value.content) {
    <div class="content">
        <app-math-mark [content]="value.content" [allowInput]="value.type == 4" [value]="yourAnswer"  [editable]="false" [rightValue]="value.answer"></app-math-mark>
    </div>
    }
    @if (value.image) {
    <div class="image">
        <img [src]="value.image | asset">
    </div>
    }
        @if (value.type < 2) {
        <div class="option-list">
            @for (item of value.option; track $index) {
                @if (optionChecked(item) || item.is_right) {
                    <div class="option-item" [ngClass]="{'right': item.is_right, 'wrong': !item.is_right}">
                        <i class="iconfont" [ngClass]="{'icon-check': item.is_right, 'icon-close': !item.is_right}"></i>
                        <span class="order">{{ item.order }}.</span>
                        <span class="option-label">
                            <app-math-mark [content]="item.content"></app-math-mark>
                        </span>
                    </div>
                } @else {
                    <div class="option-item">
                        <i class="iconfont"></i>
                        <span class="order">{{ item.order }}.</span>
                        <span class="option-label">
                            <app-math-mark [content]="item.content"></app-math-mark>
                        </span>
                    </div>
                }
            }
        </div>
        } @else if (value.type == 2) {
        <div class="option-list">
            @if (value.right > 0) {
            <div class="option-item right">
                <i class="iconfont icon-check"></i>
                {{ value.answer > 0 ? '对' : '错' }}
            </div>
            } @else {
            <div class="option-item wrong">
                <i class="iconfont icon-close"></i>
                正确答案：{{ value.answer > 0 ? '对' : '错' }}
            </div>
            }
        </div>
        } @else if (value.type == 3) {
        <div>
            <div class="answer-text" [ngClass]="{'right': value.right > 0, 'wrong': value.right < 0}">
                <label>填写的答案:</label>
                <textarea rows="4" class="form-control" readonly>{{ value.your_answer }}</textarea>
            </div>
            <div class="answer-text right">
                <label>参考答案:</label>
                <textarea rows="4" class="form-control" readonly>{{ value.answer }}</textarea>
            </div>
        </div>
        }
</div>

<app-dialog-box #modal [title]="'调整评分'">
    <div class="form-group">
        <label for="">得分</label>
        <div class="score-input">
            <input type="number" class="form-control" [(ngModel)]="editData.score">
            / <span title="本题分值">{{ value.score || 0 }}</span>
        </div>
    </div>
    <app-exam-editor label="点评" [(ngModel)]="editData.remark"></app-exam-editor>
</app-dialog-box>